@import "../../patternfly-utilities";

.pf-c-nav {
  --pf-c-nav--Transition: var(--pf-global--Transition);

  // Nav List link
  --pf-c-nav__list-link--PaddingY: var(--pf-global--spacer--md);
  --pf-c-nav__list-link--PaddingX: var(--pf-global--spacer--md);
  --pf-c-nav__list-link--md--PaddingX: var(--pf-global--spacer--xl);
  --pf-c-nav__list-link--FontWeight: var(--pf-global--FontWeight--normal);
  --pf-c-nav__list-link--Color: var(--pf-global--Color--dark-100);
  --pf-c-nav__list-link--hover--Color: var(--pf-global--link--Color);
  --pf-c-nav__list-link--BackgroundColor: transparent;
  --pf-c-nav__list-link--after--Width: 3.125rem; // hardcoding border bottom to match design spec
  --pf-c-nav__list-link--after--Height: #{pf-size-prem(3px)};// hardcoding border bottom to match design spec

  // Modifier - current item
  --pf-c-nav__list-link--m-current--FontWeight: var(--pf-global--FontWeight--semi-bold); // applies to pf-c-nav__simple-list-link--focus--FontWeight

  // Nav simple List link
  --pf-c-nav__simple-list-link--PaddingY: var(--pf-global--spacer--sm);
  --pf-c-nav__simple-list-link--PaddingX: var(--pf-global--spacer--xl);
  --pf-c-nav__simple-list-link--hover--BackgroundColor: #{$pf-color-black-150};

  // Nav horizontal list link
  --pf-c-nav__horizontal-list-item--MarginRight: var(--pf-global--spacer--xl);
  --pf-c-nav__horizontal-list-link--lg--PaddingBottom: var(--pf-global--spacer--lg);
  --pf-c-nav__horizontal-list-link--focus--FontWeight: var(--pf-global--FontWeight--bold);
  --pf-c-nav__horizontal-list-link--Color: #{$pf-color-black-300};
  --pf-c-nav__horizontal-list-link--hover--Color: var(--pf-global--active-color--300);

  // Subnav links
  --pf-c-nav__subnav--MarginTop: var(--pf-global--spacer--sm);
  --pf-c-nav__subnav--MaxHeight: #{pf-size-prem(600px)};
  --pf-c-nav__subnav-item--PaddingLeft: var(--pf-global--spacer--lg);
  --pf-c-nav__subnav-item--md--PaddingLeft: calc(var(--pf-global--spacer--xl) + var(--pf-global--spacer--md)); // automate this value based on previously set values

  // List toggle
  --pf-c-nav__list-toggle--PaddingX: var(--pf-global--spacer--sm);
  --pf-c-nav__list-toggle--Transition: .1s ease-in-out;

  // Nav section
  --pf-c-nav__section--MarginTop: var(--pf-global--spacer--xl);

  // Nav section title fonts
  --pf-c-nav__section-title--FontSize: var(--pf-global--FontSize--sm);
  --pf-c-nav__section-title--Color: var(--pf-global--Color--dark-200);

  // Base styling
  overflow-x: auto;

  // Hide scrollbars
  &::-webkit-scrollbar {
    display: none;
  }

  // Disable underline
  [class*="list"] [class*="link"] {
    &,
    &:hover,
    &:focus,
    &:active {
      text-decoration: none;
    }
  }
}

// List default
.pf-c-nav__list {
  // Item
  > .pf-c-nav__item {
    position: relative;
  }

  // Link
  .pf-c-nav__link {
    position: relative;
    display: flex;
    align-items: baseline;
    padding: var(--pf-c-nav__list-link--PaddingY) var(--pf-c-nav__list-link--PaddingX);
    font-weight: var(--pf-c-nav__list-link--FontWeight);
    color: var(--pf-c-nav__list-link--Color);

    @media screen and (min-width: $pf-global--breakpoint--md) {
      --pf-c-nav__list-link--PaddingX: var(--pf-c-nav__list-link--md--PaddingX);
    }

    // States
    &.pf-m-hover,
    &:hover,
    &.pf-m-active,
    &:active,
    &.pf-m-focus,
    &:focus {
      --pf-c-nav__list-link--Color: var(--pf-c-nav__list-link--hover--Color);
      --pf-c-nav__list-link--FontWeight: var(--pf-c-nav__list-link--m-current--FontWeight);

      &::after {
        background-color: var(--pf-c-nav__list-link--hover--Color);
      }
    }

    // After - border bottom treatment
    &::after {
      position: absolute;
      bottom: 0;
      left: var(--pf-c-nav__list-link--PaddingX);
      width: var(--pf-c-nav__list-link--after--Width);
      height: var(--pf-c-nav__list-link--after--Height);
      content: "";
      background-color: var(--pf-c-nav__list-link--BackgroundColor);

      @media screen and (min-width: $pf-global--breakpoint--md) {
        --pf-c-nav__list-link--PaddingX: var(--pf-c-nav__list-link--md--PaddingX);
      }
    }
  }

  // States
  .pf-m-current.pf-c-nav__link,
  .pf-m-current > .pf-c-nav__link {
    font-weight: var(--pf-c-nav__list-link--m-current--FontWeight);
    color: var(--pf-c-nav__list-link--hover--Color);
    background-color: var(--pf-c-nav__list-link--BackgroundColor);

    &::after {
      background-color: var(--pf-c-nav__list-link--hover--Color);
    }
  }
}

// Toggle caret
.pf-c-nav__toggle {
  flex: none;
  padding-right: var(--pf-c-nav__list-toggle--PaddingX);
  padding-left: var(--pf-c-nav__list-toggle--PaddingX);
  margin-left: auto;
  line-height: 1;
  pointer-events: none;
  border: 0;

  // Add transition to base
  & > * {
    transition: var(--pf-c-nav__list-toggle--Transition);
  }
}

// Rotate the icon
.pf-c-nav__item.pf-m-expanded .pf-c-nav__toggle > * {
  transform: rotate(90deg);
}


// List simple
// no bottom border, no children. Used independently or as a subnav item of .pf-c-nav__list (default list component).
.pf-c-nav__simple-list {
  // List simple link
  .pf-c-nav__link {
    display: block;
    padding: var(--pf-c-nav__simple-list-link--PaddingY) var(--pf-c-nav__simple-list-link--PaddingX);
    font-weight: var(--pf-c-nav__simple-list-link--FontWeight);
    color: var(--pf-c-nav__list-link--Color);
    background-color: var(--pf-c-nav__list-link--BackgroundColor);

    // States
    &.pf-m-hover,
    &:hover,
    &.pf-m-focus,
    &:focus,
    &.pf-m-active,
    &:active,
    &.pf-m-current {
      --pf-c-nav__list-link--Color: var(--pf-c-nav__list-link--hover--Color);

      background-color: var(--pf-c-nav__simple-list-link--hover--BackgroundColor);
    }

    &.pf-m-focus,
    &:focus,
    &.pf-m-active,
    &:active,
    &.pf-m-current {
      --pf-c-nav__simple-list-link--FontWeight: var(--pf-c-nav__list-link--m-current--FontWeight);
    }

    // Adjust padding of descendant links
    .pf-c-nav__item & {
      padding-left: var(--pf-c-nav__subnav-item--PaddingLeft);

      @media screen and (min-width: $pf-global--breakpoint--md) {
        --pf-c-nav__subnav-item--PaddingLeft: var(--pf-c-nav__subnav-item--md--PaddingLeft);
      }
    }

    // If child of list, hide bottom border treatment
    &::after {
      display: none;
    }
  }
}

// Horizontal and tertiary nav
.pf-c-nav__horizontal-list,
.pf-c-nav__tertiary-list {
  display: inline-flex;

  .pf-c-nav__link {
    position: relative;
    display: inline-block;
  }
}

// List horizontal, masthead
.pf-c-nav__horizontal-list {
  .pf-c-nav__item {
    margin-right: var(--pf-c-nav__horizontal-list-item--MarginRight);
  }

  .pf-c-nav__link {
    padding-top: var(--pf-c-nav__list-link--PaddingY);
    padding-bottom: var(--pf-c-nav__list-link--PaddingY);
    font-weight: var(--pf-c-nav__list-link--FontWeight);
    color: var(--pf-c-nav__horizontal-list-link--Color);
    white-space: nowrap;

    @media screen and (min-width: $pf-global--breakpoint--lg) {
      --pf-c-nav__list-link--PaddingY: var(--pf-c-nav__horizontal-list-link--lg--PaddingBottom);
    }

    // States
    &.pf-m-hover,
    &:hover,
    &.pf-m-focus,
    &:focus,
    &.pf-m-active,
    &:active,
    &.pf-m-current {
      --pf-c-nav__horizontal-list-link--Color: var(--pf-c-nav__horizontal-list-link--hover--Color);

      &::after {
        background-color: var(--pf-c-nav__horizontal-list-link--hover--Color);
      }
    }

    &.pf-m-focus,
    &:focus,
    &.pf-m-active,
    &:active,
    &.pf-m-current {
      --pf-c-nav__list-link--FontWeight: var(--pf-c-nav__horizontal-list-link--focus--FontWeight);
    }

    // After - border bottom treatment
    &::after {
      position: absolute;
      bottom: 0;
      left: 0;
      display: block;
      width: 100%;
      height: var(--pf-c-nav__list-link--after--Height);
      content: "";
    }
  }
}

// List tertiary
.pf-c-nav__tertiary-list {
  .pf-c-nav__item {
    margin-right: var(--pf-c-nav__horizontal-list-item--MarginRight);
  }

  // List tertiary link
  .pf-c-nav__link {
    padding-top: var(--pf-c-nav__list-link--PaddingY);
    padding-bottom: var(--pf-c-nav__list-link--PaddingY);
    font-weight: var(--pf-c-nav__list-link--FontWeight);
    color: var(--pf-c-nav__list-link--Color);
    white-space: nowrap;

    // States
    .pf-m-hover,
    &:hover,
    .pf-m-focus,
    &:focus,
    .pf-m-active,
    &:active,
    &.pf-m-current {
      --pf-c-nav__list-link--Color: var(--pf-c-nav__list-link--hover--Color);

      &::after {
        background-color: var(--pf-c-nav__list-link--hover--Color);
      }
    }

    .pf-m-focus,
    &:focus,
    .pf-m-active,
    &:active,
    &.pf-m-current {
      --pf-c-nav__list-link--FontWeight: var(--pf-c-nav__horizontal-list-link--focus--FontWeight);
    }

    // After - border bottom treatment
    &::after {
      position: absolute;
      bottom: 0;
      left: 0;
      display: block;
      width: 100%;
      height: var(--pf-c-nav__list-link--after--Height);
      content: "";
    }
  }
}

// Subnav
.pf-c-nav__subnav {
  flex: 1 0 100%;

  // Set default states
  max-height: 0;
  margin-top: 0;
  overflow: hidden;
  opacity: 0;
  transition: var(--pf-c-nav--Transition);

  // Hide scrollbars
  &::-webkit-scrollbar {
    display: none;
  }

  // Expanded list item
  .pf-c-nav__item.pf-m-expanded & {
    max-height: var(--pf-c-nav__subnav--MaxHeight);
    margin-top: var(--pf-c-nav__subnav--MarginTop);
    overflow-y: auto;
    opacity: 1;
  }
}

.pf-c-nav__section + .pf-c-nav__section {
  margin-top: var(--pf-c-nav__section--MarginTop);
}

// Section
.pf-c-nav__section-title {
  padding: var(--pf-c-nav__simple-list-link--PaddingY) var(--pf-c-nav__simple-list-link--PaddingX);
  font-size: var(--pf-c-nav__section-title--FontSize);
  font-weight: var(--pf-c-nav__list-link--m-current--FontWeight);
  color: var(--pf-c-nav__section-title--Color);
}
